graph TB
    subgraph External["External Systems & Services"]
        Developer["ðŸ‘¤ Developer/Team<br/>Sends: Feature requests<br/>Receives: Code results"]
        LLM["ðŸ¤– LLM Services<br/>(Claude, GPT)<br/>Provides: Strategic reasoning<br/>Frequency: ~1 call/10min"]
        Git["ðŸ“š Git Repository<br/>(GitHub, GitLab)<br/>Source: Current codebase<br/>Sink: Generated code"]
        Analytics["ðŸ“Š Analytics Databases<br/>(ClickHouse, Neo4j)<br/>Receives: All events<br/>Frequency: Real-time"]
    end

    subgraph CODITECT["ðŸŽ¯ CODITECT SYSTEM<br/>Autonomous Software Development"]
        Orchestrator["Layer 1: Orchestrator<br/>Strategic Planning<br/>10-min cycles<br/>LLM-heavy<br/><br/>â€¢ Mission Planner<br/>â€¢ Goal Manager<br/>â€¢ Resource Allocator"]

        TaskQueue["Layer 2: Task Queue Manager<br/>Situation Assessment<br/>100-500ms cycles<br/>Medium cost<br/><br/>â€¢ World Model<br/>â€¢ Consistency Detector<br/>â€¢ Task Queue"]

        Agents["Layer 3: Worker Agents<br/>Execution<br/>Continuous cycles<br/>Low cost<br/><br/>â€¢ Analyzer Agent<br/>â€¢ Coder Agent<br/>â€¢ Tester Agent"]

        Memory["Long-term Memory<br/>Learning & Analytics<br/><br/>â€¢ Redis (state)<br/>â€¢ NATS (events)<br/>â€¢ ClickHouse (analytics)<br/>â€¢ Neo4j (knowledge)<br/>â€¢ ChromaDB (vectors)"]
    end

    Developer -->|Requests| Orchestrator
    Orchestrator -->|Status| Developer

    Orchestrator -->|Prompts| LLM
    LLM -->|Plans| Orchestrator

    Agents -->|Read/Write| Git
    Git -->|Code content| Agents

    Orchestrator -->|Task plans| TaskQueue
    TaskQueue -->|Task assignments| Agents
    Agents -->|Results & anomalies| TaskQueue
    TaskQueue -->|Progress| Orchestrator

    Orchestrator -->|Events| Memory
    TaskQueue -->|Events| Memory
    Agents -->|Events| Memory

    Memory -->|Insights| Orchestrator
    Memory -->|Analytics| Analytics

    style CODITECT fill:#e1f5ff
    style Orchestrator fill:#fff9c4
    style TaskQueue fill:#c8e6c9
    style Agents fill:#bbdefb
    style Memory fill:#f0f4c3
    style External fill:#f5f5f5
